# 하우키키 
<br>

# Team-Info
| (1) 과제명 | 고객의 상황을 반영한 응대와 주문 결제 자동화를 제공하는 휴먼터치 AI 챗오더
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 23-클로버 |
| (3) 팀 구성원 | 이여진 (2176272): 리더, BE,  DB 설계 및 구현, API 설계 및 구현, 클라우드 서버 환경 구축, 검증 <br> 연가은 (2171028): 팀원, AI interface (rag,프롬프트 엔지니어링), 검증 <br> 이주연 (2171037) : 팀원, FE, UI 설계 및 구현, 검증	 |
| (4) 팀 지도교수 | 윤명국 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 생성형AI, 주문 및 매장 문의 처리, 휴먼터치 AI 챗오더  |
| (7) 과제 내용 요약 | 하우키키는 고객의 상황을 반영한 응대와 주문 결제 자동화를 제공하는 휴먼터치 AI 챗오더입니다. 기존 키오스크 및 테이블 오더는 정형화된 선택형 인터페이스로 인해 고객의 다양한 요구를 반영하기 어렵고, 주문 외 문의 사항을 처리할 수 없어 사장님이 직접 응대해야 하는 부담이 있습니다. 이를 해결하기 위해 하우키키는 대화형 챗봇을 활용하여 고객과 자연스럽게 소통하고, 주문부터 결제, 요청사항 처리까지 자동화하는 기능을 제공합니다. <br>고객은 스마트폰으로 챗봇과 자유롭게 대화하며 메뉴 추천을 받고, 주문 및 결제를 진행할 수 있습니다. 이때 챗오더는 RAG 기술을 통해 매장 맞춤형 정보를 활용하여 고객의 질문에 최적화된 답변을 제공합니다. 또한 자연스러운 대화를 위해 Few-Shot-Prompting 기법을 포함한 프롬프트 엔지니어링을 적용하여, 매장에서 발생하는 다양한 대화 상황에 최적화했습니다. 챗오더를 통해 주문 및 요청이 들어오면 GPT가 Function Calling을 실행해  사장님께 전달되어 사장님은 주문과 요청 사항을 실시간으로 확인하고 관리할 수 있습니다. 최종적으로 하우키키는 1인 운영 음식점에서 챗오더 기반의 자동화된 주문 및 응대 시스템을 통해 사장님의 업무 부담을 줄이고, 고객의 주문 경험을 개선하는 것을 목표로 합니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | **1. Target Customer** <br> 1) 1인 운영 음식점 사장님<br> - 매장을 혼자 운영하며 주문·결제·응대·조리를 모두 담당해야 하는 자영업자<br>- 기존 키오스크나 테이블 오더 시스템의 한계로 인해 고객 응대 부담을 직접 떠안아야 하는 경우가 많음<br>2) 음식점 이용 고객<br>- 매장에서 원활한 서비스와 신속한 응대를 원하는 고객<br>- 기존 키오스크 및 테이블 오더 시스템 사용이 어려운 고객<br><br>**2. 해결해야 할 문제점 (Pain Points)**<br>1) 1인 음식점 사장님의 Pain Points<br>- 업무 과부하: 주문, 결제, 응대, 조리를 혼자 처리해야 하므로 피로도가 높음<br>- 자동화 시스템의 한계: 기존 키오스크와 POS 시스템이 분리되어 있어 추가 연동 작업이 필요함<br>- 고객 응대 한계: 기존 키오스크와 테이블 오더 시스템은 고객 문의를 처리할 수 없어, 사장님이 직접 대응해야 하는 부담이 있음<br>2) 고객의 Pain Points<br>- 서비스 부족: 바쁜 매장에서 충분한 설명과 응대를 받기 어려움<br>- 불편한 주문 과정: 매장마다 다른 UI와 복잡한 주문 단계로 인해 학습 부담이 큼<br>- 대기 시간 증가: 직원이 부족한 상황에서 요청사항을 전달하거나 해결받는 데 시간이 오래 걸림  |
| (2) 기존연구와의 비교 | 기존의 유사 서비스로는 테이블 오더, 키오스크, 야구앤오더가 있습니다. <br><br><img width="839" alt="Image" src="https://github.com/user-attachments/assets/a1c33ca8-3d4a-4425-a066-86fa918669c4" /> <br> <br>1. **테이블 오더:** 테이블에 있는 기계로 고객이 직접 주문하는 방식<br>- 장점: 앉은 자리에서 주문부터 결제까지 가능하고, 물, 반찬 등의 간단한 요구는 처리 가능합니다. <br>- 단점: 지정된 문의만 가능하여, 원하는 문의가 없을 때는 직원 호출이 필수적입니다. 테이블에 기기가 고정되어 있어 공간을 차지하고, 테이블 배치를 변경하거나 옮길 때 불편함을 초래합니다.<br><br>2. **키오스크:** 매장 내 설치된 터치스크린 기기를 통해 고객이 직접 주문하는 방식<br>- 장점: 주문 및 결제에 특화되어 있습니다. 큰 화면을 활용하여 메뉴 탐색이 용이합니다. <br>- 단점: 키오스크 사용에 익숙하지 않은 고객(노년층 등)은 어려움을 겪을 수 있습니다. 문의는 직원을 호출해야 처리 가능합니다. <br><br>3. **야구앤오더**: 야구 경기장에서 QR코드를 스캔하여 고객이 자리에서 주문할 수 있는 웹서비스<br>- 장점: 앉은 자리에서 바로 주문과 결제가 가능합니다. 처음에는 선택형 대화 인퍼테이스 제공하며, 주문 내역을 카톡으로 확인할 수 있습니다.<br>- 단점: 가게로 직접 문의는 불가능하며, 고객센터를 통해 문의를 해야 하는 번거로움이 있습니다. <br><br>**하우키키는** 대화형 챗봇을 기반으로, 고객의 상황을 반영한 응대와 주문 결제 자동화를 제공하는 휴먼터치 AI 챗오더입니다.<br><br>기존의 서비스와 달리 **하우키키**는 다음과 같은 장점을 가지고 있습니다.<br>- 기존의 선택형 주문 형식과 달리, 완전한 대화형 인터페이스 제공하여 대화를 통해 고객의 원하는 요구(메뉴 사진, 메뉴 주문, 문의 처리 등)를 충족합니다.<br>- 일관된 인터페이스를 통해 학습 용이성을 제공합니다.<br>- AI 챗봇이 실시간으로 응대하여 주문 중 문의를 바로 해결합니다.<br>- 반복되는 문의에 대한 응답을 자동으로 생성하여, 사장님이 직접 응대할 필요가 없습니다. |
| (3) 제안 내용 | 1. 매장 고객은 본인의 기기로 챗봇과 자연스러운 대화가 가능합니다.<br>- 챗봇이 고객의 질문에 맞춤형 정보를 제공하여, 사장님의 업무 부담을 줄이고, 고객과 원활하게 소통합니다.<br>- 단순한 FAQ 응답을 넘어, 챗봇은 사용자의 의도를 분석하고 이에 적절한 기능을 수행합니다.<br>2. 챗봇을 통해 주문 자동 생성 및 접수 후 결제까지 처리합니다.<br>3. 사장님은 실시간 주문 상황과 요청 사항을 확인 가능합니다.<br>4. 사장님은 주문 상태 변경 등의 관리가 가능하며, 주문 및 요청 사항을 한 눈에 볼 수 있습니다.<br>5. 주문을 받는 키오스크의 기능과 주문 관리의 POS기능을 하나의 웹서비스로 제공합니다. |
| (4) 기대효과 및 의의 | **1. 1인 음식점 사장님의 업무 효율성 향상** <br> - 기존의 키오스크나 테이블 오더 시스템에 비해 고객 응대 기능을 강화할 수 있어, 사장님은 더 적은 인력으로 매장을 효율적으로 운영 <br> - AI 챗봇을 통한 자동화 시스템 도입으로 주문, 결제, 문의 응대가 자동화되어 사장님의 업무 부담 경감<br><br>**2. 매장 운영의 자동화 및 비용 절감**  <br> - 주문 및 고객 응대 자동화로 인해 직원 고용이나 추가적인 인프라 비용을 절감 <br> - 하나의 웹 서비스로 기존의 키오스크와 POS 시스템을 추가 연동이 필요하지 않아 편리성을 가진다.<br><br>**3. 고객 만족도 증대** <br> - 고객은 챗봇을 통해 직관적이고 빠른 주문 과정을 경험 <br> - 매장에 대한 문의나 요청사항을 신속하게 해결 <br> - 고객의 상황을 반영한 답변을 제공하여, 고객 맞춤형 응대가 가능합니다.<br><br>대화형 챗봇을 통해 주문, 응대, 결제까지 자동화함으로써 1인 운영 음식점의 업무 부담을 경감하고, 고객에게 더 나은 서비스 경험을 제공합니다. 이를 통해 매장 운영 효율성을 극대화하고, 비용 절감과 고객 만족도를 동시에 향상시킬 수 있습니다. |
| (5) 주요 기능 리스트 | **1. 챗봇과의 자연스러운 대화 기능**<br>1) RAG(Retrieval-Augmented Generation)를 활용한 매장 맞춤형 정보 제공<br>- 고객의 질문에 맞춰 매장 데이터를 실시간으로 검색하고, 자연스러운 답변을 생성합니다.<br>- 예시:<br>&nbsp; &nbsp; &nbsp;- “이 매장에서 가장 인기 있는 메뉴가 뭐야?”<br>&nbsp; &nbsp; &nbsp;- “이 매장에는 비건 옵션이 있어?”<br>2) 프롬프트 엔지니어링을 통한 상황 분석 및 기능 수행<br>- 고객과의 대화 내용을 분석하여 적절한 액션(요청사항 전달, 건의사항 접수, 사진 요청, 고객 상황을 반영한 추천 등)을 수행합니다.<br>- 다양한 기호와 이모티콘 사용하고 이해하기 쉬운 용어로 답변 등 어떤 상황에서도 항상 친절한 태도를 유지하도록 프롬프트를 설계합니다.<br><br>**2. 주문 관련 기능**  <br>1) 주문 생성 <br>- 챗오더는 대화에서 주문 상황을 파악하여 자동으로 주문을 생성합니다.<br>- 챗오더는 최종 주문 내역을 보고 Function Calling을 실행합니다. Function Calling이 실행되면, 백엔드 서버의 API를 호출하여 요청값을 전달하고 주문이 생성됩니다.<br>- 생성된 주문은 백엔드 서버의 데이터베이스에 저장되며 30초 후 사장님께 알림이 전송됩니다. <br>2) 주문 관리 기능 <br>- 사장님은 주문 진행 사항에 따라 주문 수락/ 완료, 결제 완료로 상태를 변경하여 주문을 관리할 수 있습니다. 또한, 주문 상태(접수대기, 주문처리중, 처리완료, 결제 완료)와 테이블 주문, 포장 주문으로 구분하여 실시간 주문 상황을 확인할 수 있어 POS의 역할로 사용할 수 있습니다.<br>3) 주문 취소 <br>- 고객은 주문 후 30초 이내에 주문을 취소할 수 있으며, 주문 취소시 자동으로 결제 취소까지 진행됩니다.<br>- 운영자는 주문이 접수된 후, ‘재료 소진’, ‘라스트오더 종료’, ‘기타’의 이유로 취소할 수 있습니다.<br> &nbsp; &nbsp; &nbsp;- ‘재료 소진’ 클릭 시, 소진 메뉴 선택 단계로 넘어가서 메뉴를 선택하고 취소가 완료됩니다.<br> &nbsp; &nbsp; &nbsp;- ‘라스트오더 종료’나 ‘기타’ 클릭 시, 주문이 바로 취소됩니다.<br><br>**3. 결제 기능**<br> - 주문이 생성되면 결제창으로 넘어가, 온라인 결제 시스템을 통해 고객은 해당 주문에 대한 결제를 챗오더에서 바로 완료할 수 있습니다.<br><br>**4. 실시간 주문 및 요청 사항 확인을 위한 알림 기능**<br>- SSE 웹 기술을 활용하여 고객과 사장님은 실시간으로 알림을 받을 수 있습니다.<br>- 가게 사정으로 인해 고객의 주문이 취소되는 경우, 고객은 팝업창으로 취소 알림을 받습니다.<br>- 주문이 생성되거나 요청사항이 들어온 경우, 사장님은 팝업창으로 해당 알림을 받아 확인할 수 있습니다.<br><br>**5. 건의사항 기능**<br>- 고객은 챗오더를 통해 매장에 대한 건의사항을 접수할 수 있습니다. <br>- 챗오더는 고객의 건의사항으로 Function Calling을 실행합니다. Function Calling이 실행되면, 백엔드 서버의 API를 호출하여 실제 건의 사항을 전달합니다. <br>- 사장님은 건의사항 페이지에서 접수된 고객들의 매장 관련 건의사항을 한 눈에 볼 수 있습니다.<br><br>**6. 요청사항 기능**  <br>- 고객은 챗오더를 통해 요청 사항을 전달합니다. 챗오더는 고객이 보낸 요청사항을 사장님께 전달할지 의사를 묻고 전달을 수행합니다.<br>- 챗오더는 고객이 원하는 요청 사항으로  Function Calling을 실행합니다. Function Calling이 실행되면, 백엔드 서버의 API를 호출하여 실제 요청 사항을 전달합니다.<br>- 사장님은 고객이 보낸 요청 사항을 알림창을 통해 확인 가능합니다.|

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | **기능명세서**<br> <img width="1016" alt="Image" src="https://github.com/user-attachments/assets/148c1d36-e59e-43d7-b44b-bd4c7d14bacd" /> <img width="1016" alt="Image" src="https://github.com/user-attachments/assets/7e35a0e7-059d-4143-9670-3318310fb761" /> <img width="1016" alt="Image" src="https://github.com/user-attachments/assets/f268eddf-a193-464e-a42f-a2fb64a41f6b" /> <br><br> **UI**![Image](https://github.com/user-attachments/assets/9c4510ef-4989-4816-bc15-1a069e38f644) *[챗오더]<br>1. ‘시작하기’ 버튼을 눌러 챗오더를 시작할 수 있습니다.<br>2. 챗오더를 통해 문의 및 주문이 자유롭게 가능합니다.<br>3. 운영자가 메뉴를 취소하면, 취소 이유와 함께 실시간 팝업 알림으로 표시됩니다.<br>4. 사용자의 주문 내역은 접수 순서대로 보여지며, 주문 후 30초 이내에만 취소할 수 있고, 이후에는 취소 버튼이 비활성화됩니다. <br>5. 취소된 주문은 회색으로 처리됩니다.<br> ![Image](https://github.com/user-attachments/assets/dc0772b6-0ac4-4118-90f9-4fa3d0ff18bc) [운영자] <br>1. 운영자는 가게 이름을 입력하여 운영자 페이지에 접속합니다.<br>2. 새로운 주문이 들어오면 실시간 팝업 알림이 표시됩니다.<br>3. 각 테이블에서 요청이 들어오면 테이블 번호와 요청 내용이 함께 실시간 팝업으로 표시됩니다.<br>4. 주문대기, 처리중, (처리)완료, 결제 완료, 전체 주문 상태별로 주문을 확인할 수 있습니다.<br>5. 주문대기 및 처리중 상태에서는 운영자가 주문을 취소할 수 있으며, 취소 사유는 ‘재료 소진’, ‘라스트오더 종료’, ‘기타’ 중에서 선택합니다.<br>6. 주문을 수락할 때는 예상 시간을 선택하거나 직접 입력 후 수락할 수 있습니다.<br>7. 각 테이블별로 주문 내역을 확인할 수 있습니다.<br>7-1. 각 테이블을 클릭하면 해당 테이블의 상세 주문 내역을 확인할 수 있습니다.<br>8. 포장 주문은 들어온 순서대로 표시됩니다. (테이블과 마찬가지로 각 주문을 클릭하면 상세 주문 내역을 확인할 수 있습니다.)<br>9. 고객이 챗오더를 통해 작성한 건의사항을 한눈에 모아볼 수 있습니다.<br>9-1. 건의사항을 클릭하면 자세한 내용을 확인할 수 있습니다<br><br> **ERD(DB 테이블 구조)** ![Image](https://github.com/user-attachments/assets/cf01ef37-260e-4fb1-b81a-4f4e0831f2ca) 하우키키 서비스의 데이터베이스 구조입니다. <br>총 6개의 테이블로 구성되어 있으며, 각각은 가게(Stores), 메뉴(Menu), 건의사항(Suggestions), 주문(Orders), 주문 상세(OrderDetails), 결제(Payment)에 대한 정보를 저장합니다.<br><br>a. **Stores 테이블**에는 각 가게의 최소한의 정보와 알림 기능을 위한 세션 식별자인 sessionToken을 포함합니다. <br>b. **Menu 테이블**에는 매장 ID(storeId)를 외래키로 포함하고, 메뉴명, 가격, 카테고리, 판매 상태 등의 정보를 저장합니다. 메뉴 이미지가 저장된 url도 함께 속성으로 저장합니다.<br>c. **Suggestions 테이블**은 고객이 챗봇을 통해 남긴 건의사항을 저장하며, 어느 매장에 대한 건의인지 구분하기 위해 매장 ID를 외래키로 포함합니다.<br>d. **Orders 테이블**은 고객의 주문 정보를 저장합니다. 이때 고객 식별을 위해 발급된 sessionToken과, 주문 상태, 포장 여부 등이 함께 저장됩니다. 주문이 취소된 경우 취소 사유와 품절된 메뉴명 등도 저장됩니다.<br>해당 주문에 대해 결제가 진행되면 주문ID를 외래키로 가지고 결제 API 제공사인 포트원 결제 ID와 함께 최종 결제 정보가 저장됩니다. <br>e. **OrderDetails 테이블**은 하나의 주문 내에 포함된 각 메뉴 항목에 대한 세부 정보를 저장하며, 메뉴 ID 및 수량, 항목별 총 가격을 기록합니다.<br>f. **Payment 테이블**은 결제가 완료된 주문에 대한 정보를 저장합니다. 주문 ID를 외래키로 갖고, 결제 서비스 제공사인 포트원에서 제공하는 impUid, 결제 금액, 결제 상태 등을 저장합니다.<br><br>각 테이블은 외래키 제약 조건으로 연결되어 있어 데이터 간의 무결성이 보장되며, 관계형 데이터베이스인 MySQL 기반으로 저장됩니다.|
| (2) 전체 시스템 구성 | **SW 시스템 구조도**<br>![Image](https://github.com/user-attachments/assets/e2039eb8-9cef-471f-ab9c-d63e4007fb84)  <br> 본 프로젝트의 SW 전체 시스템 구조에서 주요 컴포넌트는 다음과 같이 구성됩니다.<br><br>**1. 사용자 (손님, 사장님)**<br>- 손님: 매장 내 QR 코드를 스캔하여 챗봇 웹페이지에 접속하고, 매장 및 메뉴 관련 문의, 주문 및 결제, 요청 사항 전달 등의 기능을 이용할 수 있습니다.<br>- 사장님: 해당 가게의 웹사이트에 접속해 주문 내역 및 등록된 건의사항을 확인하고 주문 상태를 관리할 수 있습니다.<br><br> **2. 웹 프론트엔드 (React + Netlify)**<br>a. 손님 및 사장님을 위한 개별 웹페이지를 제공합니다. <br>b. API 호출을 통해 챗오더 및 백엔드 서버와 통신합니다.<br>c. React 프레임워크(JavaScript)로 개발되었으며, Netlify를 통해 배포됩니다.<br><br> **3. 챗오더 서버 (AWS EC2, Flask 기반)**<br>a. GPT 인터페이스 모듈을 통해 ChatGPT API를 호출하고, 사용자의 질문에 대한 응답을 생성합니다.<br>b. RAG(Retrieval-Augmented Generation) 기법을 활용하여, MongoDB에 저장된 매장 정보 및 벡터화된 문서에서 관련 내용을 검색한 후, 이를 GPT 응답 생성에 반영합니다. <br>c. 데이터 저장 및 조회가 필요한 경우 백엔드 서버 API를 호출하여 주문, 건의사항, 요청사항 등의 정보를 처리합니다.<br>d. REST API 형태로 구현되어 프론트엔드와 통신하며, 챗오더 기능을 제공합니다.<br>e. Flask 프레임워크를 기반으로 개발되었으며, AWS EC2에서 실행됩니다.<br>f. Gunicorn을 사용하여 WSGI 서버를 실행하고, Flask 애플리케이션을 여러 워커(worker) 프로세스로 처리하여 요청을 병렬 처리합니다.<br>g. Nginx를 리버스 프록시로 활용하여 외부 HTTPS 트래픽을 처리하고, Gunicorn이 실행 중인 내부 포트(8000)로 요청을 전달합니다.<br>h. CI/CD 파이프라인을 구축하여 변경사항을 자동 배포하고, 안정적인 서비스 운영을 지원합니다.<br><br> **4. 백엔드 서버 (AWS EC2, Spring Boot 기반)** <br>a. 주요 도메인별로 메뉴, 주문, 결제, 건의사항, 알림 모듈로 구성되며, 각 모듈이 전반적인 데이터 처리 및 핵심 비즈니스 로직을 수행합니다.<br>b. 메뉴 사진을 저장하는 AWS S3, 주문·결제·건의사항 등의 데이터를 저장하는 AWS RDS (MySQL)와 연동합니다.<br>c. 각 모듈은 REST API형태로 구현되었으며, 프론트엔드와 챗오더 서버에서  API를 호출하여 요청을 처리합니다.<br>d. Spring Boot (Java) 기반으로 개발되었으며, AWS EC2에서 실행됩니다. <br>e. Nginx 웹서버를 사용하여 HTTP와 HTTPS의 요청을 내부 스프링부트 서버의 8080포트로 트래픽을 프록시 처리합니다. <br>f. CI/CD 파이프라인을 구축하여 변경사항을 EC2 서버로 자동 배포합니다.<br><br> **5. 데이터베이스 (AWS RDS, AWS S3)**<br>- 이미지 저장 DB:  AWS S3에 이미지 버킷을 생성하고, 백엔드 서버에서 Spring Cloud AWS를 이용해 생성한 S3 버킷과 연동하여 사용합니다.<br>- 주문·결제·건의사항 등 사용자 관련 데이터 DB:  MySQL에 저장하여 관리하며 AWS RDS를 통해 클라우드 상에서 배포하여 사용합니다,<br><br> **6. 결제 모듈 (PortOne 결제 API 연동)**<br>- 주문 시 결제를 처리하고, 결제 정보를 저장합니다.<br>- PortOne 외부 결제 API를 연동하여 결제 요청을 수행합니다. |
| (3) 주요엔진 및 기능 설계 | **1. 챗오더 서버 (GPT 인터페이스 모듈, RAG 처리 모듈, Spring Boot API 호출 모듈)** <br> **1) GPT 인터페이스 모듈** <br> - GPT 응답 생성을 위해 GPT 인터페이스 모듈을 구현하였습니다. <br> - 사용자가 챗오더 페이지에서 메시지를 입력하면, GPT API를 호출하여 응답을 받아 전달합니다.<br> - 매장 문의와 주문 처리에 맞추어 설계된 프롬프트를 기반으로 챗오더가작동하도록 합니다.<br> - 매장 정보가 필요한 질문의 경우,  RAG (Retrieval-Augmented Generation) 기법을 활용하여 미리 작성된 매장 정보 txt 파일에서 필요한 정보를 검색 후 GPT응답을 생성합니다.<br> - 사용자와의 대화 내용에서 API 호출 상황을 판단하고, 요청값을 자동 생성하여 API 호출 _합니다. <br> **2) RAG 처리 모듈**<br> - 매장 맞춤형 응답 생성을 위해 RAG 처리 모듈을 도입하였습니다.* <br>- *사용자의 질문에 적합한 컨텍스트 정보를 생성하기 위해, MongoDB에 저장된 매장 정보 및 메뉴 정보 텍스트와 임베딩 벡터를 기반으로 유사 문서를 검색합니다.*<br>- *검색된 문서를 GPT에 전달해 응답 생성 시 해당 문맥이 반영되도록 합니다.<br>- 벡터 검색 기반의 정보 탐색을 통해 챗봇 응답의 정확도와 매장 맞춤형 정보를 향상시킵니다. <br>  **3) Spring Boot API 호출 모듈** <br>  주문과 요청, 건의 처리 및 메뉴 사진 조회 기능을 위해 SpringBoot API 호출 모듈을 구현하였습니다.<br> - 메뉴 사진 조회, 주문 생성, 요청사항 전달, 건의사항 등록 등의 비즈니스 로직을 처리해야하는 경우 백엔드 서버 API를 호출하여 처리합니다.<br> - 예: 주문을 생성하는 경우,  주문 생성 API의 url을 통해 post 요청을 보내 주문 데이터 생성<br> <br> **2. 백엔드 서버 (Spring Boot 기반 도메인 모듈 중 주요 기능 설명)**<br> **1) Menu 모듈 - 메뉴 사진 조회 API** <br> - 메뉴 사진 조회 기능을 위해 Menu 모듈을 도입하였습니다. <br> - 메뉴명으로 AWS S3에 저장된 사진 URL을 조회하여 반환합니다.<br> **2) Order 모듈 - 주문 생성 API** <br> - 주문 생성 및 주문 상태 변경 기능을 위해 Order 모듈을 도입하였습니다.<br> - 요청 데이터를 바탕으로 새로운 주문을 생성하고 MySQL DB에 저장합니다.<br> - 주문이 생성되면, 알림 API를 호출하여 사장님에게 알림을 전송합니다.<br> **3) Pay모듈 - 결제 API (PortOne 연동)** <br> - 결제 정보 저장 및 결제 기능 제공을 위해 Pay 모듈을 구현하였습니다. <br> - 여러 PG사 연동 API를 제공하는 PortOne 결제 시스템과 연결하여 API 호출을 통해 결제를 처리합니다.<br> - 결제 성공/실패 여부를 관리 및 결제 정보 검증을 처리하고 결제 정보를 데이터베이스에 저장합니다<br> **4) Suggestion 모듈 - 건의사항 저장 API** <br> - 건의 사항 조회 및 저장 기능 구현을 위해 Suggestion 모듈을 도입하였습니다. <br> - 챗오더 서버에서 전송된 건의사항을 MySQL DB에 저장합니다.<br> **5) Notification 모듈 - 실시간 알림 (SSE: Server-Sent Events)** <br> - 실시간 알림 기능 구현을 위해 Notification 모듈을 도입하였습니다. <br> - SSE 구독 API를 사용해 HTTP Connection을 맺고, 이벤트가 발생하면 서버에서 이벤트를 푸시합니다.<br> - 주문이 생성되거나 요청 사항이 접수되면, 사장님 웹사이트에 실시간 알림을 보냅니다.<br> - 주문이 취소되었을 경우, 해당 주문을 한 손님 웹사이트에도 알림을 전송합니다.<br> <br> **3.  CI/CD 자동화 (GitHub Actions + AWS S3 + AWS CodeDeploy)**<br> 배포 과정 자동화를 위해 CI/CD 파이프라인을 구축하였으며, 프로세스는 다음과 같습니다.<br> a. 개발자가 GitHub에 코드를 Push합니다. <br> b. GitHub Actions가 자동으로 빌드 및 zip 파일 생성합니다.<br> c.  AWS S3에 빌드 파일 업로드합니다.<br> d. 해당 빌드 파일을 이용해 AWS CodeDeploy가 EC2 서버에 자동 배포합니다. |
| (4) 주요 기능의 구현 | **1. 챗봇과의 자연스러운 대화 기능**<br> 프롬프트 엔지니어링과 RAG를 사용하여, 고객이 챗봇과 자연스러운 대화를 할 수 있도록 설계하였습니다.<br><br> 1) 프롬프트 엔지니어링 : 고객의 다양한 문의에 적절하게 대응할 수 있도록, 프롬프트를 ‘주문 지원(주문 수정, 주문 출력)’, ‘정중하고 친절한 대화’, ‘요청 사항 처리’, ‘컴플레인 처리’ 등의 카테고리로 나누어 구체적으로 설계하였습니다. 이를 통해 챗봇이 상황에 맞는 응답을 생성하고, 자연스럽고 친절한 고객 응대를 제공할 수 있도록 하였습니다.<br><br> 2) RAG : 매장별 정보를 txt 파일 형태로 저장하고, 챗봇이 고객의 질문을 분석하여 적절한 정보를 찾아 제공하는 방식으로 RAG를 활용하였습니다. txt 파일에는 ‘메뉴 카테고리’, ‘메뉴 정보’, ‘고객 맞춤형 추천 메뉴(매운 음식, 여성 고객 대상, 어린이 대상 등)’ 등의 정보가 포함되어 있습니다. 이를 바탕으로 챗봇은 고객의 요구에 맞춰 적절한 답변을 생성할 수 있습니다.<br><br> **2. Function Calling을 활용한 주문 처리**<br>GPT 모델은 기본적으로 실시간 데이터를 제공하지 않지만, Function Calling 기능을 활용하면 외부 시스템과 연동하여 추가적인 기능을 수행할 수 있습니다. 이를 주문 처리에 적용하여 보다 자연스럽고 효율적인 챗오더 시스템을 구축하였습니다. 이 시스템에서는 GPT가 사용자의 대화 흐름을 분석하고 *GPT 응답값에서* 최종 주문이 확정된 경우에만 Function Calling을 실행하여 주문을 처리합니다. *이때 GPT 응답값은 프롬프트 엔지니어링을 통해 최종 주문 내역 출력시 정해진 형식에 따라 생성되도록 설계하였습니다.*<br><br>1) Function Calling을 활용한 주문 처리 흐름<br>a. 주문 요청 및 수정 가능<br>&nbsp; &nbsp; &nbsp;- 손님이 메뉴를 주문하면, GPT는 주문 내역을 분석하여 응답합니다<br>&nbsp; &nbsp; &nbsp;- 하지만 이 단계에서는 즉시 Function Calling을 호출하지 않고, 손님이 주문을 추가하거나 수정할 수 있도록 합니다.<br>b. 최종 주문 여부 확인 <br>&nbsp; &nbsp; &nbsp;- 손님이 주문을 확정하지 않은 경우, GPT는 "추가하실 메뉴가 있나요?" 등의 질문을 통해 대화를 유지합니다.<br>&nbsp; &nbsp; &nbsp;- 손님이 "이대로 주문할게요." 또는 "응"과 같은 확정 의사를 보이면, GPT가 최종 주문 내역을 출력합니다.<br>&nbsp; &nbsp; &nbsp;- 이 과정에서 프롬프트 엔지니어링을 활용하여 최종 주문을 판별하는 특정 응답 패턴을 설계하였습니다.<br>c. 최종 주문 내역 포함 후 Function Calling 실행<br>&nbsp; &nbsp; &nbsp; - GPT 응답에 최종 주문 내역을 포함하는 경우에만 Function Calling을 실행합니다.<br>&nbsp; &nbsp; &nbsp; - Function Calling이 실행되면, 백엔드 API를 호출하여 실제 주문을 생성합니다.<br><br>2) Function Calling 구현 방식 <br> a. Function Calling을 위해 주문을 처리하는 API를 호출하는 함수 정의합니다.<br>b. GPT에게 주문을 처리할 수 있도록 Function Calling을 등록합니다.<br> c. 손님의 주문이 확정되었을 때만 GPT가 Function Calling을 실행하도록 설정합니다.<br><br>**3. 실시간 주문 및 요청 사항 확인을 위한 알림 시스템**<br> - 실시간으로 주문 및 요청 사항을 확인할 수 있도록 SSE(Server-Sent Events) 웹 기술을 적용하였습니다. SSE는 서버에서 클라이언트로 데이터를 비동기적으로 전송할 수 있는 단방향 통신 기술로, 이를 통해 운영자와 고객 간의 실시간 알림 기능을 구현하였습니다.<br><br>- 운영자는 가게 명으로 사이트에 접속하면 미리 정해진 각 가게의 토큰을 통해 자동으로 SSE연결이 이루어지며, 고객은 챗봇을 시작하는 순간 발급받은 토큰을 통해 SSE 연결이 활성화됩니다. 서버에서는 Spring Framework의 SseEmitter API를 활용하여 클라이언트가 SSE 요청을 보내면 매핑되는 SSE 통신 객체(SseEmitter)를 생성하고, 이벤트가 발생하면 이를 클라이언트에 전송하는 방식으로 동작합니다.<br><br>- SSE 웹 기술을 활용하여 구현된 알림 기능은 총 세 가지로, 주문 도착 알림, 요청사항 도착 알림, 주문 취소 알림이 있습니다.<br> 고객이 챗봇을 통해 주문하거나 요청사항을 전달하면, 운영자 페이지에서 알림 이벤트를 감지하여 자동으로 팝업 알림이 표시되도록 구현하였습니다. 주문의 경우, 고객이 실수로 잘못 입력하는 상황을 고려하여 30초의 주문 취소 가능 시간을 설정하였으며, 이에 따라 메뉴 주문 알림 팝업은 30초 후에 운영자 페이지에 표시되고, 요청사항 알림 팝업은 즉시 표시됩니다.<br>또한, 운영자가 재료 소진, 라스트오더 종료, 기타 사유로 인해 고객의 주문을 취소해야 하는 경우, 주문 취소 즉시 고객 챗봇 화면에 취소 사유와 함께 팝업 알림이 표시되도록 구현하였습니다. |
| (5) 기타 | *기타 사항을 기술*  |

<br>

# Evaluation

### 1. 주문 정확도 
| 항목 | 내용 |
|:---  |---  |
| (1) 평가 항목 | - 사용자가 챗오더를 통해 자연어로 입력한 주문 내용이 정확하게 해석되어 실제 주문 내역에 올바르게 반영되는지를 평가합니다. <br> - 특히 메뉴명, 수량, 누락 여부, 예외 처리를 기준으로 최종 주문 데이터의 정확성을 정량적으로 검증합니다. |
| (2) 평가 방식 | **[평가 방식]** <br> - 메뉴 요청 방식에 따른 3가지 유형으로 테스트 케이스를 구분하고, 각각의 유형에 대해 30건의 다양한 주문 시나리오를 구성하여 테스트를 수행합니다.<br>- ※ 테스트 1번과 2번은 주문이 정상적으로 생성되는 상황을 검증하므로 ‘메뉴명 일치’, ‘수량 일치’, ‘항목 누락 여부’를 평가 항목으로 사용하였고, 테스트 3번은 주문이 생성되지 않아야 하는 예외 상황을 다루므로 ‘예외 처리 여부’만을 별도로 평가 기준으로 삼았습니다.<br>- **테스트 유형** <br> <img width="802" alt="Image" src="https://github.com/user-attachments/assets/d48b4218-562e-40bc-b73d-591644d5a926" /> <br><br> **[평가 기준]** <br><img width="659" alt="Image" src="https://github.com/user-attachments/assets/d678c676-7b04-4983-a8d9-0b5391b236f8" /><br> - 각 테스트에 대해 챗오더가 생성한 주문 결과와 기댓값을 비교 분석하여 평가하였습니다.<br> - 결과는 성공/실패로 분류하여 통계 처리하였습니다. |
| (3) 평가 내용/결과 | **테스트 1 – 정확한 메뉴명 입력**<br><img width="302" alt="Image" src="https://github.com/user-attachments/assets/bcf75185-8f15-402d-b378-a957977ce6b9" /> <br><br> **테스트 2  – 유사한 메뉴명 입력**<br> <img width="567" alt="Image" src="https://github.com/user-attachments/assets/72a43d99-a570-4af9-b7c1-8ba0b77dd35f" /> <br> 실패 시나리오<br> - “라구짜장 하나 주문해줘” : 사용자는 ‘라구짜장 도삭면’을 의도하고 주문하였으나 ‘라구 짜장 뽀짜이판’으로 인식함 <br> - ‘라구 뽀짜이판 두개랑 소고기 탕면 하나 먹을래’ : ‘라구짜장 & 계란 튀김 뽀짜이판’임을 인식하지 못하여 주문을 생성하지 못하고 라구 뽀자이판은 없다고 답변함<br><br>**테스트 3 – 존재하지 않는 메뉴 입력**<br> <img width="320" alt="Image" src="https://github.com/user-attachments/assets/fc843b8d-b7ad-4899-866d-5d7a7b997d2e" /> <br><br>대부분의 테스트에서 사용자의 입력이 정확히 해석되어 최종 주문에 잘 반영되었으며, 특히 정확한 메뉴명이 입력된 경우 테스트 케이스 전부 정확히 인식하였습니다. <br>유사한 메뉴명 입력 시 2건의 오류는 사용자의 애매한 표현(ex. ‘라구짜장 도삭면’과 ‘라구짜장 뽀짜이판’이라는 메뉴가 존재할 때 ‘라구짜장’이라고 주문한 경우)에 대해 챗오더가 재질문없이 잘못된 메뉴를 선택한 경우였습니다.<br>존재하지 않는 메뉴에 대한 예외 처리에는 모두 성공하였습니다.  |

### 2. Rag 적용 효과 및 정확도 
| 항목 | 내용 |
|:---  |---  |
| (1) 평가 항목 | **[평가 항목]** <br>RAG 기반 챗오더가 사전에 구축된 DB에서 적절한 정보를 검색하고, 이를 기반으로 정확한 응답을 생성하는지를 정량적으로 평가합니다. |
| (2) 평가 방식 | **[평가 방식]** <br> **테스트 질문 세트 구성**<br>-매장 정보, 메뉴 정보 관련 질문을 40개 준비합니다.<br>-질문은 실제 사용자가 입력할 법한 자연어 문장으로 구성합니다. (예: “몇시까지 영업하나요?”, “김치찌개는 얼마예요?” 등)<br><br> **평가 척도 설정** <br>각 응답에 대해 0~2 점 척도로 평가합니다.<br>- 0점: 전혀 관련 없는 응답<br>- 1점: 관련은 있으나 정보가 부정확하거나 불완전, 너무 많은 추가 정보 제공<br>- 2점: 질문에 적절하고 정확한 정보를 제공<br>- 2점: 질문에 적절하고 정확한 정보를 제공 <br><br> **[평가 기준]** <br><img width="618" alt="Image" src="https://github.com/user-attachments/assets/2a2beea0-464b-4cd2-8916-9de1436e7a42" />|
| (3) 평가 내용/결과 | **[평가 내용/결과]** <br>- 총 질문 수: 40 (매장 정보 + 메뉴 정보)<br>- 점수 기준: 0~2점<br>*일부 질문 발췌<br><img width="1180" alt="Image" src="https://github.com/user-attachments/assets/aae5da7e-95ad-4e7f-b066-6296ebf0918c" /><br><img width="1181" alt="Image" src="https://github.com/user-attachments/assets/f9e25865-7e10-42bf-b91b-d9c5e60ebccd" /> <br>- **평균 정보 적합성 점수**: 1.925 / 2.0<br>- **평균 정보 정확성 점수**: 2.0 / 2.0<br>- **평균 정보 출처 일치 점수**: 2.0 / 2.0<br>- **정확한 응답 비율** (총점 6점 기준 6점인 질문 수 / 전체 질문 수): 92.5%<br><br>RAG 시스템은 DB 기반 정보 제공 측면에서 매우 높은 정확도와 신뢰성을 보였습니다. 특히 정보 정확성과 출처 일치 항목에서는 모든 응답이 만점을 기록하여, DB에서 적절히 검색하고 응답을 생성하는 능력이 우수함을 확인할 수 있었습니다.<br>다만, 일부 응답에서 질문에 비해 과도한 추가 정보를 포함하여 정보 적합성 점수가 소폭 낮아졌습니다. 이는 응답의 풍부성이라는 장점도 있지만, 사용자의 질문 의도에 집중하지 못하는 경우 혼란을 줄 수 있어 향후 응답 간결성과 초점 유지 측면에서 개선할 예정입니다. |

### 3. 건의사항 정확도 
| 항목 | 내용 |
|:---  |---  |
| (1) 평가 항목 | **[평가 항목]**</br>매장 고객이 보낸 건의 사항에서 꼭 필요한 핵심 내용만 정확하게 추출해 운영자에게 전달하는지를 평가합니다. |
| (2) 평가 방식 | **[평가 방식]**<br>다양한 유형의 건의 사항 40건을 선정하여, 기준에 따라 하나씩 검토 및 평가하였습니다.</br></br>**[평가 기준]**</br><img width="514" alt="Image" src="https://github.com/user-attachments/assets/c26a2249-8c59-43dd-ac37-7b539931003d" /> |
| (3) 평가 내용/결과 | **[평가 내용/결과]**</br>총 40개의 건의 사항을 기반으로 기능을 평가한 결과, 다음과 같은 성과를 확인했습니다.</br><img width="668" alt="Image" src="https://github.com/user-attachments/assets/6aa49d87-bc29-4bb4-b0e7-454174dd2b94" /></br><img width="1286" alt="Image" src="https://github.com/user-attachments/assets/e3156578-aceb-4658-86f1-d8d002319e18" /></br>총 40건의 테스트 결과, 건의 사항 인식률은 92.5%로 양호한 편이었으나, “직원 응대가 불친절했다”와 같은 메시지를 단순한 불만 표현으로 인식하고 사과만 하는 등, 일부 모호한 문장은 건의 사항으로 정확히 인식하지 못하는 사례가 있었습니다.</br>핵심 요약 정확도는 94.6%로, 전반적으로 우수했으나, 일부 세부 뉘앙스가 빠지는 경우가 있었습니다. 예를 들어, “주문 처리 속도가 너무 느려서 시간을 낭비한 기분이었어요…. 평소에는 안 그랬던 것 같은데”라는 메시지는 “주문 처리 속도가 너무 느렸어요, 시간 낭비를 한 기분이에요.”처럼 핵심 불만만 전달되어 ‘평소와는 다르다’라는 맥락은 제외되었습니다.</br>전달 정확성과 비속어 필터링은 모두 100%로 성공하여, 시스템의 안정성과 신뢰도가 높게 평가되었습니다.</br>향후 건의 사항 인식률과 요약의 정확도를 높이기 위해 관련 로직을 지속적으로 개선할 예정입니다.|

<br>

# Conclusion
| 항목 | 내용 |
|:---  |---  |
| (1) 과제 전체 내용 | 하우키키는 1인 운영 음식점 사장님의 업무 부담과 고객의 주문 및 응대 과정의 불편함을 해결하기 위해 개발된 대화형 휴먼터치 AI 챗오더 서비스입니다. <br>이를 위해 생성형 AI 기반 챗오더를 통한 주문부터 결제 처리, 요청 및 문의 응대의 자동화와 실시간 알림 기능을 중심으로 구현하였습니다. <br>고객은 매장 내 QR 코드를 통해 챗오더에 접속하여 자연스럽게 대화를 주고받으며 주문과 결제를 진행할 수 있습니다. 이때 챗오더는 프롬프트 엔지니어링 기반의 상황 분석을 통해 사용자의 의도를 파악하고 Function calling을 통해 주문 및 요청을 실시간으로 처리합니다. 또한 RAG 기술을 활용하여 매장 맞춤형 정보를 반영해 고객의 질문에 최적화된 답변을 제공합니다.<br>이렇게 생성된 주문과 요청 사항은 관리자 페이지와 알림 기능을 통해 사장님께 전달되며, 사장님은 이를 실시간으로 확인하고 관리할 수 있습니다.<br>하우키키는 기존 주문 서비스들이 가진 정형화된 UI, 고객 응대 미지원 초기 설치 비용 등의 한계를 극복하고, 대화형 인터페이스를 통해 사용자 친화성과 운영 효율을 동시에 실현하였습니다. 특히 매장 맞춤형 RAG 응답, 프롬프트 엔지니어링 기반의 자연어 처리, 실시간 SSE 알림, 클라우드 기반의 인프라 환경을 구현함으로써 기술적 완성도 또한 확보하였습니다.<br>이를 통해 본 과제는 챗오더가 ‘한 명의 직원’처럼 동작하도록 하여, 사장님의 업무 부담을 완화하고, 고객의 다양한 요구와 질문에 즉각 대응함으로써 매장 이용 만족도를 향상시키는 것을 목표로 합니다. |
| (2) 과제 중점 결과 | **[기존 서비스와의 차별성]** <br> **1. 상황 인지형 응대**<br>고객의 발화를 단순히 텍스트로 처리하지 않고, 상황과 맥락을 이해해 자연스럽고 적절한 응답을 제공합니다.<br>**2. 실시간 주문 및 문의 대응**<br>고객의 주문 및 문의에 실시간으로 반응하여 빠르고 정확한 서비스를 제공합니다.<br>**3. 대화형 인터페이스**<br>사용자는 복잡한 UI 없이 대화만으로 주문, 문의, 요청 등을 처리할 수 있어 접근성이 뛰어납니다.<br>**4. 다양한 반복 문의 자동 처리**<br>자주 반복되는 질문(예: 영업시간, 위치, 인기 메뉴 등)에 대해 자동 응답이 가능해 운영자의 부담을 줄입니다.<br><br> **[주요 기능]** <br>하우키키는 4가지 주요 기능으로 이루어져 있습니다.<br> **1. 챗오더와의 자연스러운 대화 기능** <br>고객의 질문에 따라 매장 정보를 실시간으로 검색하고, 이를 바탕으로 자연스럽고 맞춤형 응답을 제공합니다. 또한, 대화 내용을 분석하여 요구사항 전달, 건의사항 접수, 사진 요청, 상황에 맞는 추천 등 적절한 기능을 수행합니다. 예를 들어 “2명이서 가볍게 먹기 좋은 메뉴가 뭐야?”와 같은 문의에도 자연스럽게 대응하며, 모든 상황에서 친절한 태도를 유지하도록 설계되어 있습니다.<br> **2. 주문 자동 생성 및 결제 기능** <br>대화 중 고객의 주문 의도를 파악하여 자동으로 주문을 생성하는 방식으로 구현되어 있으며, 온라인 결제 시스템과 연동되어 챗오더 내에서 바로 결제까지 진행할 수 있도록 지원합니다.<br> **3. 실시간 주문 상황과 요청 사항 확인을 위한 알림 기능** <br>고객에게는 운영자가 주문이 취소할 경우 즉시 알림을 보내며, 사장님에게는 주문 접수나 고객의 요청 사항 발생 시 실시간으로 알림을 전달합니다.<br> **4. 관리자 페이지를 통한 주문 관리 기능** <br>사장님은 주문 진행 상황에 따라 주문 상태를 직접 변경할 수 있으며, 매장 주문과 포장 주문을 구분하여 실시간으로 주문 현황을 확인할 수 있습니다. 또한, 고객의 건의사항도 별도의 화면에서 관리할 수 있습니다.<br><br> **[기대효과]** <br>- 매장 운영자는, 챗오더를 통해 고객 응대와 직원 고용에 대한 부담을 줄일 수 있습니다. 챗오더는 마치 직원 한 명처럼 운영을 도와줍니다.<br>- 매장 고객은, 챗오더와의 대화를 통해 다양한 질문과 요청에 즉각적인 응답을 받을 수 있어, 매장 이용에 대한 만족도가 높아집니다. |
| (3) 프로젝트의 중점 idea 기술/구현내용 | 하우키키는 다음 **4가지 주요 기술**이 적용되었습니다.<br> **1. GPT-4o Prompting** <br>고객의 상황 분석하고 기능별 대화 흐름을 유도하여, 자연스럽고 일관성 있는 응답을 생성합니다.<br> **2. GPT Function Calling** <br>챗오더가 외부 시스템과 연동되어 실제 기능을 수행합니다.<br>→ 주문/ 요청 사항/ 건의 사항 생성 및 전송하고, 메뉴 사진 조회가 가능합니다.<br> **3. RAG(검색 증강 생성)**<br>매장 정보를 벡터화하여 DB에 저장하고, 사용자 질문과 관련된 정보를 검색하여 프롬프트에 반영함으로써, 매장별 맞춤형 응답을 제공합니다.<br> **4. SSE(Sever-Sent Events)** <br>주문 접수/취소 또는 요청 사항이 접수되면, 서버가 클라이언트에 비동기 알림을 실시간으로 전송합니다.<br><br>이러한 기술들을 조합해, 하우키키는 단순한 응답을 넘어 실제 서비스 수행이 가능한 스마트한 AI 챗오더 시스템으로 작동합니다. |
| (4) 향후 계획 및 발전 방향 | 현재 하우키키는 모든 기능의 개발을 완료하였으며, 다양한 대화 시나리오를 기반으로 추가 테스트를 진행 중입니다. GPT-4o 기반 기술 적용, 실시간 알림 기능의 안정화, 관리자 페이지 UI 개선 등을 통해 운영 효율성이 향상됨을 확인하였습니다. 또한 테스트를 통해 발견된 버그를 정리하고 수정하고 있으며, 전반적인 성능과 대화 로직 개선 작업도 병행하고 있습니다. 특히 주문 과정에서의 오류를 최소화하기 위해, 재질문 로직을 보완하여 더욱 정밀한 주문 인식이 가능하도록 개선할 예정입니다. 리팩토링과 유저 테스트를 거쳐 정식 출시되면, 하우키키는 매장 고객이 보다 직관적이고 효율적으로 주문 및 문의를 처리할 수 있도록 지원하는 AI 챗오더 서비스로 자리매김할 것입니다. |

<br>
